<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Prosumer Data Overview</title>
    <%- include('../partials/bootstrap-css') %>
    <link rel="stylesheet" type="text/css" href="/css/global.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
    <script type="text/javascript" src="/js/prosumer/prosumer-production-chart.js"></script>
    <script type="text/javascript" src="/js/prosumer/prosumer-production-updater.js"></script>
    <script type="text/javascript" src="/js/manager/modelled-price-chart.js"></script>
    <script type="text/javascript" src="/js/manager/modelled-price-updater.js"></script>
    <script type="text/javascript" src="/js/climate/wind-speed-chart.js"></script>
    <script type="text/javascript" src="/js/climate/wind-speed-updater.js"></script>
  </head>

  <body onload="loadProsumerChart('prosumer', null); loadProsumerDataUpdater('prosumer', null);
    loadModelledPriceChart(); loadModelledPriceData(); loadWindSpeedChart(); loadWindSpeedData();"
    
    onunload="unloadProsumerChart(); unloadProsumerDataUpdater(); unloadModelledPriceChart();
    unloadModelledPriceData(); unloadWindSpeedChart(); unloadWindSpeedData();"
    >

    <%- include('./appbar', {active: 'Overview'}) %>
    <div class="jumbotron text-center">
        <h1>Overview</h1>
    </div>

    <div class="container text-center">
        <div class="row">
            <div class="col-md">
                <h2>Prosumer Data</h2>
                <canvas id="prosumerChart" width="150" height="100"></canvas>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-4">
                <p id="prosumerConsumption"></p>
            </div>
            <div class="col-sm-4">
                <p id="prosumerProduction"></p>
            </div>
            <div class="col-sm-4">
                <p id="prosumerNetConsumption"></p>
            </div>
        </div>

        <br>
        
        <div class="row">
            <div class="col-md-12">
                <h3>Buffer</h3> 
            </div>
            <div class="col-sm-6">
                <canvas id="bufferChart" width="150" height="100"></canvas>
            </div>
            <div class="col-sm-6">
                <form action="/prosumer/production/settings/update" method="POST">
                    <label for="bufferMaxInput">Buffer Max</label>
                    <input name="batteryMax" class="form-control" type="number" value="1000" min="0">
                    <label for="bufferExcessiveInput">Buffer excessive production ratio</label>
                    <input name="excessiveProductionRatio" class="form-control" type="number" value="75" min="0"
                        max="100">
                    <label for="bufferUnderInput">Buffer under production ratio</label>
                    <input name="underProductionRatio" class="form-control" type="number" value="75" min="0" max="100">
                    <button type="submit" class="btn btn-default">Update Settings</button>
                </form>
            </div>
        </div>
        
        <div class="row">
            <div class="col-sm-3">
                <p id="battery"></p>
            </div>
            <div class="col-sm-3">
                <p id="batteryMax"></p>
            </div>
            <div class="col-sm-3">
                <p id="batteryExcessive"></p>
            </div>
            <div class="col-sm-3">
                <p id="batteryUnder"></p>
            </div>
        </div>
    </div>
    <%- include('../partials/bootstrap-js') %>
  </body>
</html>   

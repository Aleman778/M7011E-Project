<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Prosumer Info</title>
    <%- include('../partials/bootstrap-css') %>
    <link rel="stylesheet" type="text/css" href="/css/global.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
    
    <script type="text/javascript" src="/js/prosumer-production-chart.js"></script>
    <script type="text/javascript" src="/js/prosumer-production-updater.js"></script>
    <!-- <script type="text/javascript" src="/js/prosumer-info-updater.js"></script>
    <script type="text/javascript" src="/js/modelled-price-chart.js"></script>
    <script type="text/javascript" src="/js/wind-speed-chart.js"></script> -->
  </head>

  <body onload="loadProsumerChart('manager', '<%- prosumer.id %>');
    loadProsumerDataUpdater('manager', '<%- prosumer.id %>');" onunload="unLoadProsumerChart(); 
    unLoadProsumerDataUpdater();">
    
    <%- include('./appbar', {active: 'null'}) %>
    <div class="jumbotron text-center">
        <h1>Prosumer Info</h1>
    </div>

    <div class="container text-center">
        <div class="col-md text-center">
            <h2>Account</h2>
                <p><%- include('../partials/avatar', {user: prosumer, size: 100})%></p>
                <p id="prosumerId"></p>
                <p id="prosumerName"></p>
                <p id="prosumerEmail"></p>
                <p id="prosumerRole"></p></p>
                <p id="prosumerCreatedAt"></p></p>
                <p id="prosumerUpdatedAt"></p></p>

            <h3>Status</h2>
                <p id="prosumerOnline">></p>
                <p id="prosumerRemoved"></p></p>
                <p id="prosumerBlackOut"></p></p>
        </div>

        <br>

        <div class="row d-flex justify-content-center">
            <div class="col-md-3 text-center">
                <div class="button-container">
                    <form action="/manager/block/prosumer" method="POST">
                        <input class="form-control" type="number" name="timeout" min="10" max="100" size="3" value="10">
                        <button class="btn octicon octicon-circle-slash" type="submit" name="prosumerId" 
                            value=<%= prosumer.id; %>>Block Prosumer</button>
                    </form>
                </div>
            </div>
            <div class="col-md-3 text-center">
                <div class="button-container">
                    <form action="/manager/remove/prosumer" method="POST">
                        <button class="btn octicon octicon-x" type="submit" name="prosumerId" 
                            value=<%= prosumer.id; %>>Remove Prosumer</button>
                    </form>
                </div>
            </div>
        </div>
        

        <hr>

        <div class="row">
            <div class="col-md-6">
                <h3>Production</h3>
                <canvas id="prosumerChart" width="150" height="100"></canvas>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <p id="prosumer_consumption"></p>
                    </div>
                    <div class="col-md-6">
                        <p id="prosumer_production"></p>
                    </div>
                </div>
                <p id="prosumer_net_consumption"></p>
            </div>

            <div class="col-md-6">
                <h3>Buffer</h3> 
                <canvas id="bufferChart" width="150" height="100"></canvas>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <p id="buffer"></p>
                    </div>
                    <div class="col-md-6">
                        <p id="bufferMax"></p>
                    </div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <p id="bufferExcessive"></p>
                    </div>
                    <div class="col-md-6">
                        <p id="bufferUnder"></p>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-6">
                <h3>Electricity Price</h3>
                <canvas id="electricityPricesChart" width="150" height="100"></canvas>
                <p id="electricity_price"></p>
            </div>
            <div class="col-md-6">
                <h3>Wind speed</h3>
                <canvas id="windSpeedChart" width="150" height="100"></canvas>
                <p id="wind_speed"></p>
            </div>
        </div>
    </div>
    <%- include('../partials/bootstrap-js') %>
  </body>
</html>
        

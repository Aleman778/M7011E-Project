<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Prosumer Info</title>
    <%- include('../partials/bootstrap-css') %>
    <link rel="stylesheet" type="text/css" href="/css/global.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
  </head>

  <body>
    <%- include('./appbar', {active: 'null'}) %>
    <div class="jumbotron text-center">
        <h1>Prosumer Info</h1>
    </div>

    <div class="container text-center">
        <div class="col-md text-center">
            <h2>Account</h2>
                <p><%- include('../partials/avatar', {user: prosumer, size: 100})%></p>
                <p id="prosumerId">Id: <%= prosumer.id; %></p>
                <p id="prosumerName">Name: <%= prosumer.name; %></p>
                <p id="prosumerEmail">Email: <%= prosumer.email; %></p>
                <p id="prosumerRole">Role: <%= prosumer.role; %></p></p>
                <p id="prosumerCreatedAt">Created at: <%= prosumer.created_at; %></p></p>
                <p id="prosumerUpdatedAt">Updated at: <%= prosumer.updated_at; %></p></p>

            <h3>Status</h2>
                <p id="prosumerOnline">Online: <%= prosumer.online; %></p></p>
                <p id="prosumerRemoved">Removed: <%= prosumer.removed; %></p></p>
                <p id="prosumerBlackOut">Black-out: <%= prosumer.blackOut; %></p></p>
        </div>

        <br>

        <div class="row d-flex justify-content-center">
            <div class="col-md-3 text-center">
                <div class="button-container">
                    <form action="/manager/block/prosumer" method="POST">
                        <input class="form-control" type="number" name="timeout" min="10" max="100" size="3" value="10">
                        <button class="btn octicon octicon-circle-slash" type="submit" name="prosumerId" 
                            value=<%= prosumer.id; %>>Block Prosumer</button>
                    </form>
                </div>
            </div>
            <div class="col-md-3 text-center">
                <div class="button-container">
                    <form action="/manager/remove/prosumer" method="POST">
                        <button class="btn octicon octicon-x" type="submit" name="prosumerId" 
                            value=<%= prosumer.id; %>>Remove Prosumer</button>
                    </form>
                </div>
            </div>
        </div>
        

        <hr>

        <div class="row">
            <div class="col-md-6">
                <h3>Production Data</h3>
                <canvas id="prosumerChart" width="150" height="100"></canvas>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <p id="prosumer_consumption">test: data</p>
                    </div>
                    <div class="col-md-6">
                        <p id="prosumer_production">test: data</p>
                    </div>
                </div>
                <p id="prosumer_net_consumption">test: data</p>
            </div>

            <div class="col-md-6">
                <h3>Buffer</h3> 
                <canvas id="bufferChart" width="150" height="100"></canvas>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <p id="buffer">test: data</p>
                    </div>
                    <div class="col-md-6">
                        <p id="bufferMax">test: data</p>
                    </div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <p id="bufferExcessive">test: data</p>
                    </div>
                    <div class="col-md-6">
                        <p id="bufferUnder">test: data</p>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-6">
                <h3>Electricity Price</h3>
                <canvas id="electricityPricesChart" width="150" height="100"></canvas>
                <p id="electricity_price">test: data</p>
            </div>
            <div class="col-md-6">
                <h3>Wind speed</h3>
                <canvas id="windSpeedChart" width="150" height="100"></canvas>
                <p id="wind_speed">test: data</p>
            </div>
        </div>
    </div>
    <script>
        const prosumerId = '<%- prosumer.id %>';
    </script>
    <script type="text/javascript" src="/js/prosumer-info-update.js"></script>
    <script type="text/javascript" src="/js/prosumer-data.js"></script>
    <script type="text/javascript" src="/js/electricity-price-data.js"></script>
    <script type="text/javascript" src="/js/wind-speed-data.js"></script>
    <%- include('../partials/bootstrap-js') %>
  </body>
</html>
        
